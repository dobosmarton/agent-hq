services:
  runner:
    build: .
    env_file: .env
    network_mode: host
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 3g
          cpus: "3"
    volumes:
      - ./config.json:/app/config.json:ro
      - /home/deploy/repos:/repos
      - runner-state:/app/state

volumes:
  runner-state:
